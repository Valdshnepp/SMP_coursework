Распределенная акторная система (Distributed Actor System)

Состав команды: Иван Вилейко, Егор Корень

Описание технологии

Акторная модель вычислений представляет собой математическую модель параллельных вычислений, предложенную Карлом Хьюиттом в 1973 году. В этой модели "актор" является универсальным примитивом параллельных вычислений, который реагирует на полученные сообщения и может выполнять следующие действия:
• отправлять сообщения другим акторам;
• создавать новых акторов;
• изменять свое поведение для обработки следующего сообщения.

Ключевые принципы акторной модели:
• Изоляция состояния: каждый актор имеет собственное изолированное состояние, которое не может быть изменено напрямую извне.
• Асинхронная передача сообщений: акторы взаимодействуют исключительно через обмен сообщениями, что обеспечивает слабую связанность компонентов.
• Однопоточная обработка: каждый актор обрабатывает сообщения последовательно, что устраняет необходимость в блокировках и синхронизации.
• Распределенность: модель естественным образом распространяется на распределенные системы, где акторы могут находиться на разных узлах кластера.

Преимущества акторной модели:
• Масштабируемость: система легко масштабируется как вертикально (на многоядерных машинах), так и горизонтально (в кластере машин).
• Отказоустойчивость: изоляция акторов позволяет локализовать ошибки.
• Простота моделирования: акторная модель хорошо подходит для моделирования реальных систем с независимыми агентами.

Примеры использования на практике

Акторные системы широко применяются в различных областях:

1. Телекоммуникации и высоконагруженные системы:
   • Erlang/OTP используется в телекоммуникационном оборудовании (Ericsson), WhatsApp, RabbitMQ.
   • Akka применяется в LinkedIn, Twitter, Netflix для обработки больших объемов данных и микросервисной архитектуры.

2. Игровая индустрия:
   • Многопользовательские онлайн-игры используют акторную модель для управления игровыми сущностями, где каждый игрок или объект может быть представлен актором.

3. Финансовые системы:
   • Торговые платформы используют акторы для обработки транзакций, где каждый ордер или сделка обрабатывается независимым актором.

4. Интернет вещей (IoT):
   • Управление большим количеством устройств, где каждое устройство представлено актором, обрабатывающим события и команды.

5. Обработка потоков данных:
   • Системы обработки событий в реальном времени, где различные этапы обработки представлены акторами (например, парсинг, валидация, обогащение данных).

6. Микросервисная архитектура:
   • Акторы используются для реализации микросервисов, обеспечивая изоляцию и независимое масштабирование компонентов.

7. Распределенные вычисления:
   • Системы распределенной обработки данных, где задачи распределяются между рабочими акторами на разных узлах кластера.

Требования

Нужно реализовать распределенную акторную систему, обеспечивающую выполнение параллельных и распределенных вычислений на основе модели акторов. В качестве основного языка используется Python. 

Система должна масштабироваться как на многоядерных машинах, так и в распределенном кластере машин. С точки зрения прикладных программ отправка сообщений удаленному актору не должна отличаться от отправки локальному актору.

Основные элементы:

1. Акторы:
   o каждый актор имеет собственную почтовую очередь;
   o обработка сообщений актором происходит в однопоточном режиме (один поток на актор);
   o актор поддерживает состояние поведения, которое может изменяться при обработке сообщений;
   o поддержка создания и остановки акторов.

2. Обмен сообщениями:
   o поддержка локальной и удаленной отправки сообщений;
   o сериализация сообщений для передачи по сети;
   o поддержка backpressure через ограниченные почтовые очереди;

3. Минимальный API должен включать:
   o spawn - создание актора;
   o stop - остановка актора;
   o tell - асинхронная отправка сообщения;
   o ask - синхронная отправка сообщения с ожиданием ответа (с таймаутом);

Вариант модельной задачи

Пример распределенного подсчета слов в текстовых файлах.
Задача включает:
• разбиение файла на части;
• отправку частей файла рабочим акторам;
• подсчет слов в каждой части;
• объединение результатов подсчета;


Зоны ответственности:
Егор:
• Ядро акторной системы
• Удаленная коммуникация (messaging/)
  • transport.py - перенаправления для удаленных сообщений
  • serializer.py - сериализация/десериализация сообщений
• Публичный API (api.py)
  • create_system(), spawn(), tell(), ask(), stop(), shutdown()
• Пример remote_demo (examples/remote_demo/)
• Тесты ядра (tests/test_actor.py, tests/test_system.py, tests/test_api.py)

Иван:
• Ядро акторной системы (core/)
  • actor.py - базовый класс Actor
  • mailbox.py - очередь сообщений с backpressure
  • actor_ref.py - ссылки на акторы (ActorRef, ActorPath)
  • system.py - ActorSystem (управление жизненным циклом, маршрутизация сообщений)
• Удаленные ссылки (core/actor_ref.py - RemoteActorRef)
• Пример word_count (examples/word_count/)
• Тестыы